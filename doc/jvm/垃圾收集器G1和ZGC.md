垃圾收集器G1&ZGC
===

### G1 收集器(-XX:+UseG1GC)

G1(Garbage-First)是一款面向服务器的逻辑收集器，**主要针对配备多个处理器及大容量内存的机器**。以极高概率满足 GC 停顿时间要求的同时，还具备
高吞吐量的性能特征。

![G1 内存划分](http://yuko.top:9099/images/2022/03/14/4205a31b245f4979a39d18dbe382a8da.png)




默认年轻代对堆内存的占比是 5%，如果堆大小为 4096M，那么年轻代将占据 200MB 左右的内存，对应大概是 100 个 Region，可以通过 
"-XX:G1NewSizePercent" 设置新生代初始占比，在系统运行中，JVM 会不停给年轻代增加更多的 Region，但是新生代最多的占比不会超过 60%，可以通过
"-XX:G1MaxNewSizePercent"


特点:
1. G1 保留了年轻代和老年代的概念，但是不再是物理隔阂的，它们是不连续的 Region集合。G1 将 Java 堆划分为了多个大小相同独立区域(Region)。 
Region的 数量计算公式： 堆大小 / 2048。比如堆大小为 4096M，则对应的 Region 大小为 4096M/2048 = 2M。当然也可以使用参数 
`-XX:G1HeapRegionSize` 设定每个 Region 的大小，但是更推荐默认的计算方式。
2. G1 中年轻代的占比是动态变化的。默认初始占比为 5%。但随着系统的运行，系统会不断增加年轻代的比例，但是不会超过 60%。
3. G1 中 Eden:Survivor0:Survivor 的比例依旧为 8:1:1。
4. G1 中的 Region 区域功能会不断变化的。比如 Region 之前为为年轻代，但是经过垃圾回收之后，可能 Region 就变为老年代。
5. 
